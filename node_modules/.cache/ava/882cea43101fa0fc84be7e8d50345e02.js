'use strict';

var _ava = require('ava');

/*class HashMap {
    constructor() {
        this.data = []
    }
    get(key) {
        let index = hash(key)
        let slot = this.data[index]
        if (!slot) {
            return undefined
        }
        for (let [k, v] of slot) {
            if (key === k) {
                return v
            }
        }
    }
    set(key, value) {
        let index = hash(key)
        if (!this.data[index]) {
            this.data[index] = []
        }
        let slot = this.data[index]
        let indexInSlot = 0


        while (slot[indexInSlot]) {
            if (slot[indexInSlot][0] === key) {
                break
            }
            indexInSlot++
        }

        // переопределяем массив-пару ключ значение
        slot[indexInSlot] = [key, value]
    }
}*/

class HashMap {
    constructor() {
        this.data = [];
    }

    get(key) {
        /*let index = hash(key)
        let slot = this.data[index]
        if(!slot){
            return undefined
        }*/
        let index = hash(key);
        if (!this.data[index]) {
            this.data[index] = [];
        }
        let slot = this.data[index];
        for (let [k, v] of slot) {
            if (k === key) {
                return v;
            }
        }
    }

    set(key, value) {
        let index = hash(key);
        let slot = this.data[index];
        if (!slot) {
            slot = [];
        }
        let entryIdx = 0;
        while (slot[entryIdx]) {
            if (slot[entryIdx][0] === key) {
                break;
            }
            entryIdx++;
        }
        slot[entryIdx] = [key, value];
    }
}

// hash function (provided)
function hash(string) {
    return string.split('').reduce((a, b) => (a << 5) + a + b.charCodeAt(0), 5381);
}

/// tests

(0, _ava.test)('HashMap', t => {
    let map = new HashMap();
    map.set('abc', 123);
    map.set('foo', 'bar');
    map.set('foo', 'baz');
    t.is(map.get('abc'), 123);
    t.is(map.get('foo'), 'baz');
    t.is(map.get('def'), undefined);
});
//# sourceMappingURL=/Users/mac/WebstormProjects/interview/node_modules/.cache/ava/882cea43101fa0fc84be7e8d50345e02.js.map