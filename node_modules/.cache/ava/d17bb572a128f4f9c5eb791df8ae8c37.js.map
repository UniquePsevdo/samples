{"version":3,"sources":["reduceAsync.js"],"names":["reduceAsync","array","fn","val","a","t","Promise","resolve","b","c","setTimeout","deepEqual","acc"],"mappings":";;AAkBA;;AAlBA;;;;;;;AAOA,IAAIA,cAAc,OAAOC,KAAP,EAAcC,EAAd,EAAkBC,GAAlB,KAAwB;AACtC,SAAI,IAAIC,CAAR,IAAaH,KAAb,EAAmB;AACfE,cAAMD,GAAGC,GAAH,GAAQ,MAAMC,GAAd,EAAN;AACH;AACD,WAAOD,GAAP;AACH,CALD;AAMA;AACA;AACA;AACA;;AAIA,eAAK,MAAME,CAAN,IAAS;AACV,QAAID,IAAIE,QAAQC,OAAR,CAAgB,GAAhB,CAAR;AACA,QAAIC,IAAIF,QAAQC,OAAR,CAAgB,GAAhB,CAAR;AACA,QAAIE,IAAI,IAAIH,OAAJ,CAAYC,WAAW;AAACG,mBAAW,MAAI;AAACH,oBAAQ,GAAR;AAAa,SAA7B,EAA+B,GAA/B;AAAoC,KAA5D,CAAR;;AAEAF,MAAEM,SAAF,EAAY,MAAMX,YAAY,CAACI,CAAD,EAAGI,CAAH,EAAKC,CAAL,CAAZ,EAAqB,CAACG,GAAD,EAAMT,GAAN,KAAY,CAAC,GAAGS,GAAJ,EAAST,GAAT,CAAjC,EAAgD,EAAhD,CAAlB,GAAuE,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAvE;AACAE,MAAEM,SAAF,EAAY,MAAMX,YAAY,CAACI,CAAD,EAAGI,CAAH,EAAKC,CAAL,CAAZ,EAAqB,CAACG,GAAD,EAAMT,GAAN,KAAY,CAAC,GAAGS,GAAJ,EAAST,GAAT,CAAjC,EAAgD,CAAC,GAAD,CAAhD,CAAlB,GAA0E,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb,CAA1E;AAGH,CATD;AAUA","file":"reduceAsync.js","sourcesContent":["/*let reduceAsync = async (array, fn, value) => {\n    for (let a of array) {\n        value = fn(value, await a())\n    }\n    return value\n}*/\n\nlet reduceAsync = async (array, fn, val)=>{\n    for(let a of array){\n        val = fn(val, await a())\n    }\n    return val\n}\n/// tests\n// суть тестов заключается в том, что создаются функции которые возвращают промисы с выполненными значениями\n// одно из них с таймаутом\n//\n\nimport { test } from 'ava'\n\ntest(async t=>{\n    let a = Promise.resolve('a')\n    let b = Promise.resolve('b')\n    let c = new Promise(resolve => {setTimeout(()=>{resolve('c')}, 100)})\n\n    t.deepEqual(await reduceAsync([a,b,c], (acc, val)=>[...acc, val], []), ['a','b','c'])\n    t.deepEqual(await reduceAsync([a,b,c], (acc, val)=>[...acc, val], ['d']), ['d','a','b','c'])\n\n\n})\n/*test(async t => {\n    let a = () => Promise.resolve('a')\n    let b = () => Promise.resolve('b')\n    let c = () => new Promise(resolve => setTimeout(() => resolve('c'), 100))\n\n    t.deepEqual(\n        await reduceAsync([a, b, c], (accum, value) => [...accum, value], []),\n        ['a', 'b', 'c']\n    )\n    t.deepEqual(\n        await reduceAsync([a, c, b], (accum, value) => [...accum, value], ['d']),\n        ['d', 'a', 'c', 'b']\n    )\n})\n*/"]}